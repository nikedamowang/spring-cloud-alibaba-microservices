# 管理服务配置（包含Dubbo负载均衡优化）
# DataID: management-service.properties
# Group: DEFAULT_GROUP
# 说明: 管理服务的完整配置，包含负载均衡优化

# 服务基础配置
spring.application.name=management-service
server.port=9090

# 排除数据源配置（管理服务不需要数据库）
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration

# 管理服务特有配置
nacos.config.template-path=./config-templates

# Nacos连接配置
nacos.server-addr=localhost:8848
# nacos.namespace= 注释掉空值配置，使用默认命名空间
nacos.username=nacos
nacos.password=nacos

# Dubbo配置（管理服务作为消费者，用于监控其他服务）
dubbo.application.name=management-service
dubbo.registry.address=nacos://127.0.0.1:8848
dubbo.protocol.name=dubbo
dubbo.protocol.port=20883
dubbo.application.qos-enable=false

# Dubbo消费者配置（负载均衡优化）
dubbo.consumer.timeout=5000
dubbo.consumer.retries=1
dubbo.consumer.check=false
dubbo.consumer.loadbalance=roundrobin
dubbo.consumer.cluster=failfast
dubbo.consumer.lazy=true

# Redis配置（管理服务用于配置缓存）
spring.redis.host=localhost
spring.redis.port=6379
spring.redis.database=2
spring.redis.lettuce.pool.max-active=50
spring.redis.lettuce.pool.max-wait=-1ms
spring.redis.lettuce.pool.max-idle=5
spring.redis.lettuce.pool.min-idle=0
spring.redis.timeout=2000ms

# 缓存配置
spring.cache.type=redis
spring.cache.redis.time-to-live=1800000
spring.cache.redis.cache-null-values=false

# 业务日志配置
logging.level.com.cloudDemo.management=INFO
logging.level.org.springframework.web=INFO
logging.level.org.apache.dubbo=WARN
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# 文件日志配置（生产环境使用）
logging.file.name=logs/management-service.log
logging.logback.rollingpolicy.max-file-size=100MB
logging.logback.rollingpolicy.max-history=30

# 健康检查配置
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when_authorized

# Dubbo监控配置
dubbo.metrics.enable=true
dubbo.metrics.port=9092
